{"schema_version":"55","title":"ai-observability-demo-real-time-dashboard","tiles":[{"id":"7aadc613-ea0c-47df-b2e4-39aedb367129","title":"Agent Evaluation Metrics","visualType":"line","pageId":"88dafdb0-20c1-47a4-ac96-adee128e8b1f","layout":{"x":13,"y":0,"width":11,"height":7},"queryRef":{"kind":"query","queryId":"1809ec8c-11d7-4a48-966a-68b4eb2bfcb4"},"visualOptions":{"multipleYAxes":{"additional":[],"showMultiplePanels":false,"base":{"horizontalLines":[],"yAxisScale":"linear","yAxisMaximumValue":null,"yAxisMinimumValue":null,"columns":[],"label":"eval metrics","id":"-1"}},"legendLocation":"bottom","xColumnTitle":"eval metrics","xColumn":null,"yColumns":["Groundedness","Relevance","Similarity","Coherence"],"seriesColumns":["ModelDeploymentName"],"verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"hideLegend":false,"xAxisScale":"linear","crossFilter":[],"drillthrough":[]}},{"id":"3c52945a-2f96-42fe-94b3-02b5b8c23aea","title":"Evaluation Aggregated Metrics /w Variants","visualType":"table","pageId":"88dafdb0-20c1-47a4-ac96-adee128e8b1f","layout":{"x":0,"y":7,"width":13,"height":7},"queryRef":{"kind":"query","queryId":"83d3999a-e222-4f13-af04-77a23a03179b"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"aa2063ce-407d-456b-9ed7-769e998fc857","title":"Search Details","visualType":"table","pageId":"88dafdb0-20c1-47a4-ac96-adee128e8b1f","layout":{"x":13,"y":7,"width":11,"height":8},"queryRef":{"kind":"query","queryId":"d6cc1231-5c80-435c-a7bd-d2e892f10667"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"a17db0a8-7124-4ad5-8e74-1920135345d0","title":"Tokens consumed per model","visualType":"line","pageId":"bafbd68d-c57a-4ca9-83e6-6776baa527f9","layout":{"x":0,"y":0,"width":12,"height":7},"queryRef":{"kind":"query","queryId":"f199101b-8d65-4de4-b868-5e81cbdae603"},"visualOptions":{"xColumn":null,"multipleYAxes":{"additional":[],"showMultiplePanels":false,"base":{"horizontalLines":[],"yAxisScale":"linear","yAxisMaximumValue":null,"yAxisMinimumValue":null,"columns":[],"label":"","id":"-1"}},"yColumns":null,"seriesColumns":null,"anomalyColumns":null,"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"bbc2974d-4747-4729-a971-e2a7b9455878","title":"Average Duration per model (ms)","visualType":"line","pageId":"bafbd68d-c57a-4ca9-83e6-6776baa527f9","layout":{"x":12,"y":0,"width":12,"height":7},"queryRef":{"kind":"query","queryId":"4545e209-46e9-4e76-8044-aabf635a5644"},"visualOptions":{"xColumn":null,"multipleYAxes":{"additional":[],"showMultiplePanels":false,"base":{"horizontalLines":[],"yAxisScale":"linear","yAxisMaximumValue":null,"yAxisMinimumValue":null,"columns":[],"label":"","id":"-1"}},"yColumns":null,"seriesColumns":null,"anomalyColumns":null,"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[{"pairs":[{"parameterId":"8d172d11-a890-42ea-a4f2-6f88f3465a9e","property":"ModelName"}],"destinationPages":["bafbd68d-c57a-4ca9-83e6-6776baa527f9"],"disabled":false}]}},{"id":"5fe78de4-5ec6-4b7b-9f9d-bddbd14dff5a","title":"Evaluation Details","visualType":"table","pageId":"88dafdb0-20c1-47a4-ac96-adee128e8b1f","layout":{"x":0,"y":14,"width":13,"height":8},"queryRef":{"kind":"query","queryId":"f3158f50-95cb-46a6-9f53-584e76824e76"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"ce4a8367-0c32-4919-906a-29fb8486e8ab","title":"Interactions","visualType":"table","pageId":"bafbd68d-c57a-4ca9-83e6-6776baa527f9","layout":{"x":0,"y":7,"width":24,"height":10},"queryRef":{"kind":"query","queryId":"413e677d-96c7-42d8-aab0-2332835414cc"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"01d507ed-f302-419a-99ae-e9a5b73d5497","title":"Search Details","visualType":"table","pageId":"bafbd68d-c57a-4ca9-83e6-6776baa527f9","layout":{"x":0,"y":17,"width":12,"height":7},"queryRef":{"kind":"query","queryId":"0b4fa784-a1ef-47aa-ae3b-5f640db33722"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"c6211561-6aed-4d10-a15a-6b3272e9d996","title":"Search Duration (Ms)","visualType":"line","pageId":"bafbd68d-c57a-4ca9-83e6-6776baa527f9","layout":{"x":12,"y":17,"width":12,"height":7},"queryRef":{"kind":"query","queryId":"b2e4afd6-d781-46fd-94c7-3536384f2a09"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}},{"id":"cb3dc8e7-9ca6-403d-bc1f-b7e935d693d8","title":"Application Usage","visualType":"table","pageId":"bafbd68d-c57a-4ca9-83e6-6776baa527f9","layout":{"x":0,"y":24,"width":24,"height":7},"queryRef":{"kind":"query","queryId":"33e73e69-ca47-45e4-b739-571ca455762f"},"visualOptions":{"table__enableRenderLinks":true,"colorRulesDisabled":true,"colorStyle":"light","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[],"table__renderLinks":[],"colorRules":[]}},{"id":"fb488907-0802-4ad4-8bbb-9521aa5b5bc9","title":"Best Performing Agent Configuration","visualType":"column","pageId":"88dafdb0-20c1-47a4-ac96-adee128e8b1f","layout":{"x":0,"y":0,"width":13,"height":7},"queryRef":{"kind":"query","queryId":"a5ec5ea9-a053-4bbe-a017-f25a3e475e5b"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"Perf. Score","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"Config Version","xColumn":null,"yColumns":null,"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[{"interaction":"column","property":"ConfigVersion","disabled":false}],"drillthrough":[]}},{"id":"28aff700-6833-488e-b20c-e9599def7c2e","title":"Search Performance","visualType":"bar","pageId":"88dafdb0-20c1-47a4-ac96-adee128e8b1f","layout":{"x":13,"y":15,"width":11,"height":7},"queryRef":{"kind":"query","queryId":"d9a846e6-995c-43e4-a7b2-630277cf047f"},"visualOptions":{"multipleYAxes":{"base":{"id":"-1","label":"top-k","columns":[],"yAxisMaximumValue":null,"yAxisMinimumValue":null,"yAxisScale":"linear","horizontalLines":[]},"additional":[],"showMultiplePanels":false},"hideLegend":false,"legendLocation":"bottom","xColumnTitle":"search type","xColumn":"SearchType","yColumns":["AvgGroundedness","AvgRelevance","AvgSimilarity","AvgCoherence"],"seriesColumns":null,"xAxisScale":"linear","verticalLine":"","crossFilterDisabled":false,"drillthroughDisabled":false,"crossFilter":[],"drillthrough":[]}}],"baseQueries":[{"id":"4b9bb593-3b1b-4e2f-b007-736f70fa8186","queryId":"4148ae1b-6ac7-475d-b7a0-d52cb133099c","variableName":"eval_filter"},{"id":"e815a8ee-630b-4658-bf1b-f268741c2a68","queryId":"e9948a05-f7a8-48e8-8b76-d237d39c9f75","variableName":"eval_details_time_filter"},{"id":"ff32af96-e8d7-4318-a0a1-b6ecd56c911a","queryId":"7bba07ba-ae1f-45af-8846-7ee16e509bb5","variableName":"_ongoing_usage_time_filter"}],"parameters":[{"kind":"string","id":"8d172d11-a890-42ea-a4f2-6f88f3465a9e","displayName":"deployment name","description":"","variableName":"_deployment_name","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"ModelName"},"queryRef":{"kind":"query","queryId":"ed0d8c96-8f70-49bf-9ff0-94e75aa4d690"},"autoReset":true},"showOnPages":{"kind":"all"}},{"kind":"string","id":"10554899-0a1b-4a39-a2cf-a39f32da1f85","displayName":"evaluation deployment name","description":"","variableName":"_eval_deployment_name","selectionType":"array","includeAllOption":true,"defaultValue":{"kind":"all"},"dataSource":{"kind":"query","columns":{"value":"ModelDeploymentName"},"queryRef":{"kind":"query","queryId":"5c0a5b88-f35c-4bf3-8fda-b8a1a70be12e"},"autoReset":true},"showOnPages":{"kind":"selection","pageIds":["88dafdb0-20c1-47a4-ac96-adee128e8b1f"]}},{"kind":"duration","id":"f19ed51a-54ac-4ce5-a3bf-51eed8511c2b","displayName":"Time range","description":"","beginVariableName":"_startTime","endVariableName":"_endTime","defaultValue":{"kind":"dynamic","count":1,"unit":"hours"},"showOnPages":{"kind":"all"}}],"dataSources":[{"kind":"kusto-trident","scopeId":"kusto-trident","clusterUri":"","database":"ae163f52-309b-47a0-a1bb-00ffe67dd373","name":"ai-observability-demo-eventhouse","id":"50c2bc1c-e45b-4404-bce6-9a30c2c08358","workspace":"00000000-0000-0000-0000-000000000000"}],"pages":[{"name":"Evaluation","id":"88dafdb0-20c1-47a4-ac96-adee128e8b1f"},{"name":"Ongoing","id":"bafbd68d-c57a-4ca9-83e6-6776baa527f9"}],"queries":[{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"eval_filter \n| where isempty(['_eval_deployment_name']) or ModelDeploymentName in (['_eval_deployment_name'])\n| join kind=inner \nEvaluationRaw on $left.OperationId == $right.OperationId and $left.ParentId == $right.ParentId\n| project EventTime, AgentName, ConfigVersion, ModelDeploymentName,Temperature, SearchType, SearchTopK, Groundedness, Relevance, Similarity,Coherence, ChatSystemPrompt, Question, GroundTruth, Context, ModelAnswer\n| render linechart \n\n","id":"1809ec8c-11d7-4a48-966a-68b4eb2bfcb4","usedVariables":["_eval_deployment_name","eval_filter"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"eval_filter\n| where isempty(['_eval_deployment_name']) or ModelDeploymentName in (['_eval_deployment_name'])\n| extend RoundedToHour = bin(EventTime, 1h)\n| summarize \n    AvgGroundedness = avg(Groundedness), \n    AvgRelevance = avg(Relevance), \n    AvgSimilarity = avg(Similarity), \n    AvgCoherence = avg(Coherence)\nby \n   RoundedToHour,\n   OperationId,\n   AgentName, \n   ConfigVersion, \n   ModelName, \n   ModelVersion, \n   ModelDeploymentName, \n   OpenAIAPIVersion, \n   Temperature, \n   Seed, \n   SearchType, \n   SearchTopK, \n   IntentSystemPrompt, \n   ChatSystemPrompt\n| order by ModelDeploymentName\n\n","id":"83d3999a-e222-4f13-af04-77a23a03179b","usedVariables":["_eval_deployment_name","eval_filter"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"eval_filter\n| summarize \n    AvgGroundedness = avg(Groundedness),\n    AvgRelevance = avg(Relevance),\n    AvgSimilarity = avg(Similarity),\n    AvgCoherence = avg(Coherence)\nby OperationId, SearchType, SearchTopK\n| order by AvgRelevance desc\n","id":"d6cc1231-5c80-435c-a7bd-d2e892f10667","usedVariables":["eval_filter"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"_ongoing_usage_time_filter\n| where isempty(['_deployment_name']) or ModelName in (['_deployment_name'])\n| summarize TotalTokensConsumed = sum(TotalTokens) by bin(EventTime, 30m), ModelName\n| render linechart","id":"f199101b-8d65-4de4-b868-5e81cbdae603","usedVariables":["_deployment_name","_ongoing_usage_time_filter"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"_ongoing_usage_time_filter\n| where isempty(['_deployment_name']) or ModelName in (['_deployment_name'])\n| summarize AvgDurationMs = avg(Duration) by bin(EventTime, 30m), ModelName\n| render linechart ","id":"4545e209-46e9-4e76-8044-aabf635a5644","usedVariables":["_deployment_name","_ongoing_usage_time_filter"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"eval_details_time_filter\n| sort by EventTime desc \n","id":"f3158f50-95cb-46a6-9f53-584e76824e76","usedVariables":["eval_details_time_filter"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"_ongoing_usage_time_filter","id":"413e677d-96c7-42d8-aab0-2332835414cc","usedVariables":["_ongoing_usage_time_filter"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"\nSearchDetails\n| where EventTime between (_startTime .._endTime )\n| sort by EventTime desc","id":"0b4fa784-a1ef-47aa-ae3b-5f640db33722","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"SearchDetails\n| where EventTime between (_startTime .._endTime )\n| project EventTime, DurationMs\n| summarize AvgDurationMs = avg(DurationMs) by bin(EventTime, 1h)\n| render linechart ","id":"b2e4afd6-d781-46fd-94c7-3536384f2a09","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"ApplicationUsage\n| where EventTime between (_startTime .._endTime )\n| sort by EventTime desc","id":"33e73e69-ca47-45e4-b739-571ca455762f","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"\nEvaluationMetrics \n| extend PerformanceScore = Coherence + Groundedness + Relevance + Similarity \n| summarize avgPerformanceScore=avg(PerformanceScore) by ConfigVersion \n| extend avgPerformanceScore = round(avgPerformanceScore, 3) \n| top 5 by avgPerformanceScore desc\n","id":"a5ec5ea9-a053-4bbe-a017-f25a3e475e5b","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"eval_filter\n| summarize \n    AvgGroundedness = avg(Groundedness),\n    AvgRelevance = avg(Relevance),\n    AvgSimilarity = avg(Similarity),\n    AvgCoherence = avg(Coherence)\nby SearchType, SearchTopK\n| render barchart ","id":"d9a846e6-995c-43e4-a7b2-630277cf047f","usedVariables":["eval_filter"]},{"id":"4148ae1b-6ac7-475d-b7a0-d52cb133099c","dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | where isempty(['lm_model']) or <column name> == ['lm_model'] // Single selection filtering\n// | take 100\n\nEvaluationMetrics \n| where EventTime between (_startTime .._endTime)","usedVariables":["_endTime","_startTime"]},{"id":"e9948a05-f7a8-48e8-8b76-d237d39c9f75","dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | where isempty(['lm_model']) or <column name> == ['lm_model'] // Single selection filtering\n// | take 100\nEvaluationRaw\n| where EventTime between (_startTime .._endTime )","usedVariables":["_endTime","_startTime"]},{"id":"7bba07ba-ae1f-45af-8846-7ee16e509bb5","dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | where isempty(['lm_model']) or <column name> == ['lm_model'] // Single selection filtering\n// | take 100\nOngoingUsage\n| where EventTime between (_startTime .._endTime )\n| sort by EventTime desc","usedVariables":["_endTime","_startTime"]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | where <datetime column> between (['item_time_start'] .. ['item_time_end']) // Time range filtering\n// | take 100\n\nOngoingUsage\n| distinct ModelName\n","id":"ed0d8c96-8f70-49bf-9ff0-94e75aa4d690","usedVariables":[]},{"dataSource":{"kind":"inline","dataSourceId":"50c2bc1c-e45b-4404-bce6-9a30c2c08358"},"text":"// Please enter your KQL query (Example):\n// <table name>\n// | where <datetime column> between (['_startTime'] .. ['_endTime']) // Time range filtering\n// | where isempty(['_deployment_name']) or <column name> == ['_deployment_name'] // Single selection filtering\n// | take 100\n\nEvaluationMetrics\n| distinct ModelDeploymentName\n","id":"5c0a5b88-f35c-4bf3-8fda-b8a1a70be12e","usedVariables":[]}]}