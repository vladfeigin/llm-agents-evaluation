2025-01-04 13:11:51,440 - multiagent_evaluation.utils.utils - INFO - Running the flow for batch.
2025-01-04 13:11:51,455 - multiagent_evaluation.utils.utils - ERROR - An error occurred during flow execution.data path ./data.jsonl does not exist
Traceback (most recent call last):
  File "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/evaluate.py", line 38, in runflow
    base_run = pf.run(
               ^^^^^^^
  File "/Users/vladfeigin/myprojects/llm-agent-evaluation/.venv/lib/python3.11/site-packages/promptflow/_sdk/_pf_client.py", line 301, in run
    return self._run(
           ^^^^^^^^^^
  File "/Users/vladfeigin/myprojects/llm-agent-evaluation/.venv/lib/python3.11/site-packages/promptflow/_sdk/_pf_client.py", line 179, in _run
    raise FileNotFoundError(f"data path {data} does not exist")
FileNotFoundError: data path ./data.jsonl does not exist
2025-01-04 13:13:55,831 - multiagent_evaluation.utils.utils - INFO - Running the flow for batch.
2025-01-04 13:15:57,875 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-raw", "metadata": {"name": "main_rag_flow_ztsdfv2y_20250104_131355_867174", "created_on": "2025-01-04T13:13:55.866322+02:00", "status": "Completed", "display_name": "main_rag_flow_ztsdfv2y_20250104_131355_867174", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"description": "RAG Agent configuration", "config_version": 1.1, "application_version": "1.0", "application_name": "rag_llmops_workshop", "agent_name": "rag_agent", "model_name": "gpt-4o-mini", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "model_deployment": "gpt-4o-mini", "model_deployment_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-10-01-preview", "retrieval": {"search_type": "hybrid", "top_k": 5, "embedding_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15", "embedding_deployment": "text-embedding-ada-002", "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "model_parameters": {"temperature": 0.0, "seed": 42}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history.  Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained.  Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question.  For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019\n", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain.  Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n    \n<context> {context} </context>\"\n", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/private/var/folders/nm/syx206rd2cqb5m7jqvjd5z5r0000gn/T/main_rag_flow_ztsdfv2y/flow.flex.yaml", "output_path": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_ztsdfv2y_20250104_131355_867174", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "system_metrics": {"total_tokens": 9240, "prompt_tokens": 8570, "completion_tokens": 670, "duration": 46.128992}}, "flow_name": "main_rag_flow_ztsdfv2y", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_ztsdfv2y_20250104_131355_867174/flow_outputs", "portal_url": "https://ai.azure.com/projectflows/trace/run/main_rag_flow_ztsdfv2y_20250104_131355_867174/details?wsid=/subscriptions/f19e5692-7cfd-4d6a-bea5-8c8ec0c949a9/resourcegroups/genai-workshop-1-rg/providers/Microsoft.MachineLearningServices/workspaces/genai-workshop1-proj"}, "result": [{"inputs.session_id": 1, "inputs.question": "What's Microsoft Fabric?", "inputs.answer": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. Fabric integrates these components into a cohesive stack, simplifying analytics requirements by offering a seamlessly integrated, user-friendly platform. Key features: Unified data storage with OneLake, AI capabilities embedded within the platform, Centralized data management and governance,SaaS model.", "inputs.context": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses data movement, processing, ingestion, transformation, real-time event routing, and report building. It offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions.", "inputs.line_number": 0, "outputs.output": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises, providing a unified solution for data movement, processing, ingestion, transformation, real-time event routing, and report building. It integrates various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases into a cohesive stack, operating on a Software as a Service (SaaS) model. Fabric centralizes data storage with OneLake and incorporates AI capabilities, simplifying the transition from raw data to actionable insights. It also ensures security, governance, and ease of use across different user roles.", "relevance": 5.0, "groundedness": 3.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.session_id": 2, "inputs.question": "What is OneLake in Microsoft Fabric?", "inputs.answer": "OneLake in Microsoft Fabric is a unified storage system built on Azure Data Lake Storage (ADLS) Gen2. It provides a single SaaS experience and a tenant-wide store for data, serving both professional and citizen developers. OneLake simplifies data management by eliminating the need for understanding infrastructure concepts such as resource groups, RBAC, Azure Resource Manager, redundancy, or regions. It ensures easy data discovery, sharing, and uniform enforcement of policy and security settings, eliminating data silos.", "inputs.context": "Microsoft Fabric integrates separate components into a cohesive stack. Instead of relying on different databases or data warehouses, you can centralize data storage with OneLake. AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. With Fabric, you can easily transition your raw data into actionable insights for business users. OneLake provides the data storage backbone for Fabric, bringing together data from multiple sources.", "inputs.line_number": 1, "outputs.output": "OneLake is the unified data lake component of Microsoft Fabric, built on Azure Data Lake Storage (ADLS) Gen2. It serves as a central repository for all organizational data, simplifying data management by eliminating silos created by individual developers. OneLake provides a single, tenant-wide storage solution that allows for easy data discovery, sharing, and uniform enforcement of policies and security settings. It organizes data hierarchically, enabling users to create multiple workspaces and lakehouses for efficient data handling. OneLake is integrated with all Microsoft Fabric compute experiences, requiring no additional configuration.", "relevance": 3.0, "groundedness": 3.0, "similarity": 4.0, "coherence": 5.0}, {"inputs.session_id": 3, "inputs.question": "What are the core services in Microsoft Fabric?", "inputs.answer": "The core services include Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, Databases and Power BI. These services are designed to work together seamlessly, providing a comprehensive set of analytics experiences tailored to specific user roles and tasks. The platform operates on a Software as a Service (SaaS) model, ensuring simplicity, integration, and centralized management.", "inputs.context": "Microsoft Fabric offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. These services allow users to handle data end-to-end, from ingestion to analytics, all within a unified platform. The platform's integrated services enable users to transform raw data into actionable insights through various analytics workflows.", "inputs.line_number": 2, "outputs.output": "Microsoft Fabric integrates several core services, including:\n\n1. **Data Engineering**\n2. **Data Factory**\n3. **Data Science**\n4. **Data Warehouse**\n5. **Real-Time Intelligence**\n6. **Power BI**\n\nThese services are tailored for distinct user roles and tasks, providing a unified environment for analytics and data management.", "relevance": 4.0, "groundedness": 1.0, "similarity": 4.0, "coherence": 5.0}, {"inputs.session_id": 4, "inputs.question": "How does Microsoft Fabric simplify analytics?", "inputs.answer": "Microsoft Fabric simplifies analytics by providing a unified, end-to-end platform that integrates various data and analytics services into a single, user-friendly environment. The key points: Unified platform, SaaS model,Centralized Data Storage, centralized Governance and Security, easy of use, embedded AI ", "inputs.context": "With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions. It enables analytics and data handling within a single ecosystem, reducing the complexity associated with managing disparate services.", "inputs.line_number": 3, "outputs.output": "Microsoft Fabric simplifies analytics by providing a unified, end-to-end platform that integrates various services into a cohesive stack. Key points include:\n\n1. **Seamless Integration**: Combines components like Power BI, Data Factory, and Data Science into one platform, eliminating the need for multiple vendors.\n\n2. **Centralized Data Storage**: Utilizes OneLake for centralized data management, allowing users to access and analyze data without complex ETL processes.\n\n3. **User-Friendly Experience**: Tailors analytics experiences to specific user roles and tasks, making it easier for business users to derive insights.\n\n4. **Built-in AI Capabilities**: Integrates AI features directly into the platform, reducing the need for manual integration.\n\n5. **Governance and Security**: Provides centralized administration and automatic application of permissions and sensitivity labels across services.\n\nOverall, Fabric streamlines the analytics process, enabling users to focus on generating insights rather than managing infrastructure.", "relevance": 5.0, "groundedness": 5.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.session_id": 5, "inputs.question": "How is AI integrated in Microsoft Fabric?", "inputs.answer": "AI capabilities are embedded within Fabric, removing the need for separate AI integrations. The keys benefits: Embedded AI Capabilities, Copilot in Microsoft Fabric, Unified Data Management,Automated Machine Learning, Centralized Governance and Security ", "inputs.context": "AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. This integration simplifies workflows, allowing users to incorporate AI and ML processes directly within their analytics operations. Fabric\u2019s AI capabilities help users transition raw data into actionable insights for business users, supporting smarter decision-making and data-driven processes within enterprises.", "inputs.line_number": 4, "outputs.output": "AI is seamlessly integrated within Microsoft Fabric, enhancing various functionalities across the platform. Key points include:\n\n1. **Generative AI Features**: Copilot and other AI capabilities assist in transforming and analyzing data, generating insights, and creating visualizations and reports.\n\n2. **Embedded AI Capabilities**: AI functionalities are built into the Fabric environment, eliminating the need for manual integration.\n\n3. **Support for Data Workflows**: AI accelerates the data journey by integrating with workloads like Data Engineering, Data Science, and Real-Time Analytics.\n\n4. **User Experience**: Tailored experiences for different user roles (e.g., data engineers, scientists) leverage AI to streamline tasks and improve productivity.\n\n5. **Governance and Security**: AI helps in managing data sensitivity and governance across the platform, ensuring compliance and security.\n\nOverall, AI in Microsoft Fabric enhances productivity and simplifies analytics processes.", "relevance": 5.0, "groundedness": 5.0, "similarity": 4.0, "coherence": 5.0}]}
2025-01-04 13:15:57,885 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-metrics", "metadata": {"name": "main_rag_flow_ztsdfv2y_20250104_131355_867174", "created_on": "2025-01-04T13:13:55.866322+02:00", "status": "Completed", "display_name": "main_rag_flow_ztsdfv2y_20250104_131355_867174", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"description": "RAG Agent configuration", "config_version": 1.1, "application_version": "1.0", "application_name": "rag_llmops_workshop", "agent_name": "rag_agent", "model_name": "gpt-4o-mini", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "model_deployment": "gpt-4o-mini", "model_deployment_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-10-01-preview", "retrieval": {"search_type": "hybrid", "top_k": 5, "embedding_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15", "embedding_deployment": "text-embedding-ada-002", "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "model_parameters": {"temperature": 0.0, "seed": 42}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history.  Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained.  Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question.  For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019\n", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain.  Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n    \n<context> {context} </context>\"\n", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/private/var/folders/nm/syx206rd2cqb5m7jqvjd5z5r0000gn/T/main_rag_flow_ztsdfv2y/flow.flex.yaml", "output_path": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_ztsdfv2y_20250104_131355_867174", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "system_metrics": {"total_tokens": 9240, "prompt_tokens": 8570, "completion_tokens": 670, "duration": 46.128992}}, "flow_name": "main_rag_flow_ztsdfv2y", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_ztsdfv2y_20250104_131355_867174/flow_outputs", "portal_url": "https://ai.azure.com/projectflows/trace/run/main_rag_flow_ztsdfv2y_20250104_131355_867174/details?wsid=/subscriptions/f19e5692-7cfd-4d6a-bea5-8c8ec0c949a9/resourcegroups/genai-workshop-1-rg/providers/Microsoft.MachineLearningServices/workspaces/genai-workshop1-proj"}, "result": [{"metric": "relevance", "score": 4.4}, {"metric": "groundedness", "score": 3.4}, {"metric": "similarity", "score": 4.4}, {"metric": "coherence", "score": 5.0}]}
2025-01-04 13:15:57,886 - multiagent_evaluation.utils.utils - INFO - >>>Batch evaluation flow completed successfully.
2025-01-04 13:21:00,490 - multiagent_evaluation.utils.utils - INFO - Running the flow for batch.
2025-01-04 13:23:36,259 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-raw", "metadata": {"name": "main_rag_flow_h8s843yg_20250104_132100_504029", "created_on": "2025-01-04T13:21:00.503330+02:00", "status": "Completed", "display_name": "main_rag_flow_h8s843yg_20250104_132100_504029", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"description": "RAG Agent configuration", "config_version": 1.1, "application_version": "1.0", "application_name": "rag_llmops_workshop", "agent_name": "rag_agent", "model_name": "gpt-4o-mini", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "model_deployment": "gpt-4o-mini", "model_deployment_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-10-01-preview", "retrieval": {"search_type": "hybrid", "top_k": 5, "embedding_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15", "embedding_deployment": "text-embedding-ada-002", "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "model_parameters": {"temperature": 0.0, "seed": 42}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history.  Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained.  Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question.  For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019\n", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain.  Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n    \n<context> {context} </context>\"\n", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/private/var/folders/nm/syx206rd2cqb5m7jqvjd5z5r0000gn/T/main_rag_flow_h8s843yg/flow.flex.yaml", "output_path": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_h8s843yg_20250104_132100_504029", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "system_metrics": {"total_tokens": 9203, "prompt_tokens": 8570, "completion_tokens": 633, "duration": 47.277108}}, "flow_name": "main_rag_flow_h8s843yg", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_h8s843yg_20250104_132100_504029/flow_outputs", "portal_url": "https://ai.azure.com/projectflows/trace/run/main_rag_flow_h8s843yg_20250104_132100_504029/details?wsid=/subscriptions/f19e5692-7cfd-4d6a-bea5-8c8ec0c949a9/resourcegroups/genai-workshop-1-rg/providers/Microsoft.MachineLearningServices/workspaces/genai-workshop1-proj"}, "result": [{"inputs.session_id": 1, "inputs.question": "What's Microsoft Fabric?", "inputs.answer": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. Fabric integrates these components into a cohesive stack, simplifying analytics requirements by offering a seamlessly integrated, user-friendly platform. Key features: Unified data storage with OneLake, AI capabilities embedded within the platform, Centralized data management and governance,SaaS model.", "inputs.context": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses data movement, processing, ingestion, transformation, real-time event routing, and report building. It offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions.", "inputs.line_number": 0, "outputs.output": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises, providing a unified solution for data movement, processing, ingestion, transformation, real-time event routing, and report building. It integrates various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases into a cohesive stack, operating on a Software as a Service (SaaS) model. Fabric centralizes data storage with OneLake and incorporates AI capabilities, simplifying the transition from raw data to actionable insights for business users.", "relevance": 5.0, "groundedness": 3.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.session_id": 2, "inputs.question": "What is OneLake in Microsoft Fabric?", "inputs.answer": "OneLake in Microsoft Fabric is a unified storage system built on Azure Data Lake Storage (ADLS) Gen2. It provides a single SaaS experience and a tenant-wide store for data, serving both professional and citizen developers. OneLake simplifies data management by eliminating the need for understanding infrastructure concepts such as resource groups, RBAC, Azure Resource Manager, redundancy, or regions. It ensures easy data discovery, sharing, and uniform enforcement of policy and security settings, eliminating data silos.", "inputs.context": "Microsoft Fabric integrates separate components into a cohesive stack. Instead of relying on different databases or data warehouses, you can centralize data storage with OneLake. AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. With Fabric, you can easily transition your raw data into actionable insights for business users. OneLake provides the data storage backbone for Fabric, bringing together data from multiple sources.", "inputs.line_number": 1, "outputs.output": "OneLake is the unified data lake built into Microsoft Fabric, serving as a central location for storing all organizational data. It is based on Azure Data Lake Storage (ADLS) Gen2 and provides a single Software as a Service (SaaS) experience without the need for upfront provisioning. OneLake eliminates data silos by offering a cohesive storage system for all developers, ensuring easy data discovery, sharing, and uniform policy enforcement. It organizes data hierarchically, allowing users to create multiple workspaces and lakehouses for efficient data management.", "relevance": 5.0, "groundedness": 1.0, "similarity": 4.0, "coherence": 5.0}, {"inputs.session_id": 3, "inputs.question": "What are the core services in Microsoft Fabric?", "inputs.answer": "The core services include Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, Databases and Power BI. These services are designed to work together seamlessly, providing a comprehensive set of analytics experiences tailored to specific user roles and tasks. The platform operates on a Software as a Service (SaaS) model, ensuring simplicity, integration, and centralized management.", "inputs.context": "Microsoft Fabric offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. These services allow users to handle data end-to-end, from ingestion to analytics, all within a unified platform. The platform's integrated services enable users to transform raw data into actionable insights through various analytics workflows.", "inputs.line_number": 2, "outputs.output": "Microsoft Fabric integrates several core services, including:\n\n1. **Data Engineering**\n2. **Data Factory**\n3. **Data Science**\n4. **Data Warehouse**\n5. **Real-Time Intelligence**\n6. **Power BI**\n\nThese services are tailored for distinct user roles and tasks, providing a unified environment for analytics and data management.", "relevance": 4.0, "groundedness": 1.0, "similarity": 4.0, "coherence": 5.0}, {"inputs.session_id": 4, "inputs.question": "How does Microsoft Fabric simplify analytics?", "inputs.answer": "Microsoft Fabric simplifies analytics by providing a unified, end-to-end platform that integrates various data and analytics services into a single, user-friendly environment. The key points: Unified platform, SaaS model,Centralized Data Storage, centralized Governance and Security, easy of use, embedded AI ", "inputs.context": "With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions. It enables analytics and data handling within a single ecosystem, reducing the complexity associated with managing disparate services.", "inputs.line_number": 3, "outputs.output": "Microsoft Fabric simplifies analytics by providing a unified, end-to-end platform that integrates various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Power BI. Key points include:\n\n1. **Seamless Integration**: Combines multiple analytics services into a single platform, eliminating the need to manage different tools from various vendors.\n\n2. **Centralized Data Storage**: Utilizes OneLake for centralized data management, allowing users to access and analyze data without complex ETL processes.\n\n3. **User-Friendly Experience**: Tailors analytics experiences to specific user roles and tasks, making it easier for business users to derive insights.\n\n4. **AI Capabilities**: Embeds AI functionalities directly within the platform, streamlining the process of turning raw data into actionable insights.\n\n5. **Governance and Security**: Provides centralized administration and governance, ensuring data security and compliance across all services.\n\nOverall, Fabric enhances efficiency and reduces complexity in analytics workflows.", "relevance": 5.0, "groundedness": 1.0, "similarity": 4.0, "coherence": 5.0}, {"inputs.session_id": 5, "inputs.question": "How is AI integrated in Microsoft Fabric?", "inputs.answer": "AI capabilities are embedded within Fabric, removing the need for separate AI integrations. The keys benefits: Embedded AI Capabilities, Copilot in Microsoft Fabric, Unified Data Management,Automated Machine Learning, Centralized Governance and Security ", "inputs.context": "AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. This integration simplifies workflows, allowing users to incorporate AI and ML processes directly within their analytics operations. Fabric\u2019s AI capabilities help users transition raw data into actionable insights for business users, supporting smarter decision-making and data-driven processes within enterprises.", "inputs.line_number": 4, "outputs.output": "AI is seamlessly integrated within Microsoft Fabric, enhancing various functionalities across the platform. Key points include:\n\n1. **Generative AI Features**: Copilot and other AI capabilities assist in transforming and analyzing data, generating insights, and creating visualizations and reports.\n\n2. **Embedded AI Capabilities**: AI functionalities are built into the different components of Fabric, eliminating the need for manual integration.\n\n3. **Data Processing**: AI helps in automating tasks such as creating dashboards and data pipelines, improving productivity and streamlining workflows.\n\n4. **Unified Experience**: AI integration supports a cohesive user experience across services like Data Engineering, Data Factory, and Power BI.\n\nOverall, AI in Microsoft Fabric accelerates the data journey and enhances the analytics experience for users.", "relevance": 5.0, "groundedness": 5.0, "similarity": 4.0, "coherence": 5.0}]}
2025-01-04 13:23:36,261 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-metrics", "metadata": {"name": "main_rag_flow_h8s843yg_20250104_132100_504029", "created_on": "2025-01-04T13:21:00.503330+02:00", "status": "Completed", "display_name": "main_rag_flow_h8s843yg_20250104_132100_504029", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"description": "RAG Agent configuration", "config_version": 1.1, "application_version": "1.0", "application_name": "rag_llmops_workshop", "agent_name": "rag_agent", "model_name": "gpt-4o-mini", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "model_deployment": "gpt-4o-mini", "model_deployment_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-10-01-preview", "retrieval": {"search_type": "hybrid", "top_k": 5, "embedding_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15", "embedding_deployment": "text-embedding-ada-002", "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "model_parameters": {"temperature": 0.0, "seed": 42}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history.  Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained.  Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question.  For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019\n", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain.  Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n    \n<context> {context} </context>\"\n", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/private/var/folders/nm/syx206rd2cqb5m7jqvjd5z5r0000gn/T/main_rag_flow_h8s843yg/flow.flex.yaml", "output_path": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_h8s843yg_20250104_132100_504029", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "system_metrics": {"total_tokens": 9203, "prompt_tokens": 8570, "completion_tokens": 633, "duration": 47.277108}}, "flow_name": "main_rag_flow_h8s843yg", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_h8s843yg_20250104_132100_504029/flow_outputs", "portal_url": "https://ai.azure.com/projectflows/trace/run/main_rag_flow_h8s843yg_20250104_132100_504029/details?wsid=/subscriptions/f19e5692-7cfd-4d6a-bea5-8c8ec0c949a9/resourcegroups/genai-workshop-1-rg/providers/Microsoft.MachineLearningServices/workspaces/genai-workshop1-proj"}, "result": [{"metric": "relevance", "score": 4.8}, {"metric": "groundedness", "score": 2.2}, {"metric": "similarity", "score": 4.2}, {"metric": "coherence", "score": 5.0}]}
2025-01-04 13:23:36,262 - multiagent_evaluation.utils.utils - INFO - >>>Batch evaluation flow completed successfully.
2025-01-04 13:25:50,220 - multiagent_evaluation.utils.utils - INFO - Running the flow for batch.
2025-01-04 13:28:09,380 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-raw", "metadata": {"name": "main_rag_flow_q2i4aktt_20250104_132550_241723", "created_on": "2025-01-04T13:25:50.240992+02:00", "status": "Completed", "display_name": "main_rag_flow_q2i4aktt_20250104_132550_241723", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"description": "RAG Agent configuration", "config_version": 1.1, "application_version": "1.0", "application_name": "rag_llmops_workshop", "agent_name": "rag_agent", "model_name": "gpt-4o-mini", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "model_deployment": "gpt-4o-mini", "model_deployment_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-10-01-preview", "retrieval": {"search_type": "hybrid", "top_k": 5, "embedding_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15", "embedding_deployment": "text-embedding-ada-002", "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "model_parameters": {"temperature": 0.0, "seed": 42}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history.  Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained.  Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question.  For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019\n", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain.  Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n    \n<context> {context} </context>\"\n", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/private/var/folders/nm/syx206rd2cqb5m7jqvjd5z5r0000gn/T/main_rag_flow_q2i4aktt/flow.flex.yaml", "output_path": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_q2i4aktt_20250104_132550_241723", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "system_metrics": {"total_tokens": 9184, "prompt_tokens": 8570, "completion_tokens": 614, "duration": 49.749967}}, "flow_name": "main_rag_flow_q2i4aktt", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_q2i4aktt_20250104_132550_241723/flow_outputs", "portal_url": "https://ai.azure.com/projectflows/trace/run/main_rag_flow_q2i4aktt_20250104_132550_241723/details?wsid=/subscriptions/f19e5692-7cfd-4d6a-bea5-8c8ec0c949a9/resourcegroups/genai-workshop-1-rg/providers/Microsoft.MachineLearningServices/workspaces/genai-workshop1-proj"}, "result": [{"inputs.session_id": 1, "inputs.question": "What's Microsoft Fabric?", "inputs.answer": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. Fabric integrates these components into a cohesive stack, simplifying analytics requirements by offering a seamlessly integrated, user-friendly platform. Key features: Unified data storage with OneLake, AI capabilities embedded within the platform, Centralized data management and governance,SaaS model.", "inputs.context": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses data movement, processing, ingestion, transformation, real-time event routing, and report building. It offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions.", "inputs.line_number": 0, "outputs.output": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises, providing a unified solution for data movement, processing, ingestion, transformation, real-time event routing, and report building. It integrates various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases into a cohesive stack, operating on a Software as a Service (SaaS) model. Fabric centralizes data storage with OneLake and incorporates AI capabilities, simplifying the transition from raw data to actionable insights. It also offers centralized administration, governance, and security features.", "relevance": 5.0, "groundedness": 3.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.session_id": 2, "inputs.question": "What is OneLake in Microsoft Fabric?", "inputs.answer": "OneLake in Microsoft Fabric is a unified storage system built on Azure Data Lake Storage (ADLS) Gen2. It provides a single SaaS experience and a tenant-wide store for data, serving both professional and citizen developers. OneLake simplifies data management by eliminating the need for understanding infrastructure concepts such as resource groups, RBAC, Azure Resource Manager, redundancy, or regions. It ensures easy data discovery, sharing, and uniform enforcement of policy and security settings, eliminating data silos.", "inputs.context": "Microsoft Fabric integrates separate components into a cohesive stack. Instead of relying on different databases or data warehouses, you can centralize data storage with OneLake. AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. With Fabric, you can easily transition your raw data into actionable insights for business users. OneLake provides the data storage backbone for Fabric, bringing together data from multiple sources.", "inputs.line_number": 1, "outputs.output": "OneLake is the unified data lake built into Microsoft Fabric, serving as a central location for storing all organizational data. It is based on Azure Data Lake Storage (ADLS) Gen2 and provides a single SaaS experience without the need for upfront provisioning. OneLake eliminates data silos by offering a cohesive storage system for developers, ensuring easy data discovery, sharing, and uniform policy enforcement. It organizes data hierarchically, allowing users to create workspaces and lakehouses for efficient data management and collaboration.", "relevance": 5.0, "groundedness": 1.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.session_id": 3, "inputs.question": "What are the core services in Microsoft Fabric?", "inputs.answer": "The core services include Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, Databases and Power BI. These services are designed to work together seamlessly, providing a comprehensive set of analytics experiences tailored to specific user roles and tasks. The platform operates on a Software as a Service (SaaS) model, ensuring simplicity, integration, and centralized management.", "inputs.context": "Microsoft Fabric offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. These services allow users to handle data end-to-end, from ingestion to analytics, all within a unified platform. The platform's integrated services enable users to transform raw data into actionable insights through various analytics workflows.", "inputs.line_number": 2, "outputs.output": "Microsoft Fabric integrates several core services, including:\n\n1. **Data Engineering**\n2. **Data Factory**\n3. **Data Science**\n4. **Data Warehouse**\n5. **Real-Time Analytics**\n6. **Power BI**\n\nThese services are tailored for distinct user roles and tasks, providing a unified environment for analytics and data management.", "relevance": 4.0, "groundedness": 1.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.session_id": 4, "inputs.question": "How does Microsoft Fabric simplify analytics?", "inputs.answer": "Microsoft Fabric simplifies analytics by providing a unified, end-to-end platform that integrates various data and analytics services into a single, user-friendly environment. The key points: Unified platform, SaaS model,Centralized Data Storage, centralized Governance and Security, easy of use, embedded AI ", "inputs.context": "With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions. It enables analytics and data handling within a single ecosystem, reducing the complexity associated with managing disparate services.", "inputs.line_number": 3, "outputs.output": "Microsoft Fabric simplifies analytics by providing a unified, end-to-end platform that integrates various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Power BI. Key points include:\n\n1. **Seamless Integration**: Combines multiple analytics services into a single platform, eliminating the need to manage different vendors.\n2. **Centralized Data Storage**: Utilizes OneLake for centralized data management, making data access easier.\n3. **User-Friendly Experience**: Tailors experiences for specific user roles and tasks, enhancing usability.\n4. **AI Capabilities**: Embeds AI functionalities directly within the platform, reducing manual integration efforts.\n5. **Governance and Security**: Provides centralized administration and automatic permissions, ensuring data security and compliance.\n\nOverall, Fabric streamlines the analytics process, allowing users to focus on deriving insights rather than managing infrastructure.", "relevance": 5.0, "groundedness": 1.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.session_id": 5, "inputs.question": "How is AI integrated in Microsoft Fabric?", "inputs.answer": "AI capabilities are embedded within Fabric, removing the need for separate AI integrations. The keys benefits: Embedded AI Capabilities, Copilot in Microsoft Fabric, Unified Data Management,Automated Machine Learning, Centralized Governance and Security ", "inputs.context": "AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. This integration simplifies workflows, allowing users to incorporate AI and ML processes directly within their analytics operations. Fabric\u2019s AI capabilities help users transition raw data into actionable insights for business users, supporting smarter decision-making and data-driven processes within enterprises.", "inputs.line_number": 4, "outputs.output": "AI is seamlessly integrated within Microsoft Fabric, enhancing various functionalities across the platform. Key points include:\n\n1. **Generative AI Features**: Copilot and other AI capabilities assist in transforming and analyzing data, generating insights, and creating visualizations and reports.\n\n2. **Embedded AI Capabilities**: AI functionalities are built into the different components of Fabric, eliminating the need for manual integration.\n\n3. **Data Processing**: AI helps in automating tasks such as creating dashboards and data pipelines, streamlining workflows for users.\n\n4. **Unified Experience**: AI integration supports a cohesive user experience across services like Data Engineering, Data Factory, and Power BI.\n\nOverall, AI in Microsoft Fabric aims to simplify data management and enhance productivity for business users.", "relevance": 5.0, "groundedness": 5.0, "similarity": 4.0, "coherence": 5.0}]}
2025-01-04 13:28:09,382 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-metrics", "metadata": {"name": "main_rag_flow_q2i4aktt_20250104_132550_241723", "created_on": "2025-01-04T13:25:50.240992+02:00", "status": "Completed", "display_name": "main_rag_flow_q2i4aktt_20250104_132550_241723", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"description": "RAG Agent configuration", "config_version": 1.1, "application_version": "1.0", "application_name": "rag_llmops_workshop", "agent_name": "rag_agent", "model_name": "gpt-4o-mini", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "model_deployment": "gpt-4o-mini", "model_deployment_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-mini/chat/completions?api-version=2024-10-01-preview", "retrieval": {"search_type": "hybrid", "top_k": 5, "embedding_endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15", "embedding_deployment": "text-embedding-ada-002", "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "model_parameters": {"temperature": 0.0, "seed": 42}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history.  Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained.  Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question.  For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019\n", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain.  Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n    \n<context> {context} </context>\"\n", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/private/var/folders/nm/syx206rd2cqb5m7jqvjd5z5r0000gn/T/main_rag_flow_q2i4aktt/flow.flex.yaml", "output_path": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_q2i4aktt_20250104_132550_241723", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "system_metrics": {"total_tokens": 9184, "prompt_tokens": 8570, "completion_tokens": 614, "duration": 49.749967}}, "flow_name": "main_rag_flow_q2i4aktt", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/main_rag_flow_q2i4aktt_20250104_132550_241723/flow_outputs", "portal_url": "https://ai.azure.com/projectflows/trace/run/main_rag_flow_q2i4aktt_20250104_132550_241723/details?wsid=/subscriptions/f19e5692-7cfd-4d6a-bea5-8c8ec0c949a9/resourcegroups/genai-workshop-1-rg/providers/Microsoft.MachineLearningServices/workspaces/genai-workshop1-proj"}, "result": [{"metric": "relevance", "score": 4.8}, {"metric": "groundedness", "score": 2.2}, {"metric": "similarity", "score": 4.8}, {"metric": "coherence", "score": 5.0}]}
2025-01-04 13:28:09,382 - multiagent_evaluation.utils.utils - INFO - >>>Batch evaluation flow completed successfully.
2025-01-12 23:32:08,051 - multiagent_evaluation.utils.utils - INFO - GLOBAL_AGENT_CONFIG = {'AgentConfiguration': {'agent_name': 'rag_agent', 'description': 'RAG Agent configuration', 'config_version': '8.5', 'application_version': '1.0', 'application_name': 'rag_llmops_workshop', 'deployment': {'name': 'gpt-4o-3', 'model_name': 'gpt-4o', 'model_version': '2024-08-01', 'endpoint': 'https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-3/chat/completions?api-version=2024-10-01-preview', 'openai_api_version': '2024-10-01-preview'}, 'model_parameters': {'temperature': 0.5, 'seed': 42}, 'retrieval': {'parameters': {'search_type': 'hybrid', 'top_k': 3, 'index_name': 'micirosoft-tech-stack-index-0', 'index_semantic_configuration_name': 'vector-llmops-workshop-index-semantic-configuration'}, 'deployment': {'model_name': 'text-embedding-ada-002', 'model_version': '2024-08-01', 'openai_api_version': '2024-10-01-preview', 'name': 'text-embedding-ada-002', 'endpoint': 'https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15'}}, 'intent_system_prompt': 'Your task is to extract the user’s intent by reformulating their latest question into a standalone query that is understandable without prior chat history. Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained. Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question. For example, if the latest question is ‘What about its pricing?’ and the chat history discusses Microsoft Azure, reformulate it to ‘What is the pricing of Microsoft Azure?’', 'chat_system_prompt': 'You are a knowledgeable assistant specializing only in technology domain. Deliver concise and clear answers, emphasizing the main points of the user’s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n\n<context>\n{context}\n</context>', 'human_template': 'question: {input}'}}
2025-01-12 23:32:08,052 - multiagent_evaluation.utils.utils - INFO - Running the flow for batch.
2025-01-12 23:32:42,657 - multiagent_evaluation.utils.utils - INFO - RAG.Initializing RAG
2025-01-12 23:32:42,657 - multiagent_evaluation.utils.utils - INFO - RAG.__init__#agent_config = {'AgentConfiguration': {'agent_name': 'rag_agent', 'description': 'RAG Agent configuration', 'config_version': '8.5', 'application_version': '1.0', 'application_name': 'rag_llmops_workshop', 'deployment': {'name': 'gpt-4o-3', 'model_name': 'gpt-4o', 'model_version': '2024-08-01', 'endpoint': 'https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-3/chat/completions?api-version=2024-10-01-preview', 'openai_api_version': '2024-10-01-preview'}, 'model_parameters': {'temperature': 0.5, 'seed': 42}, 'retrieval': {'parameters': {'search_type': 'hybrid', 'top_k': 3, 'index_name': 'micirosoft-tech-stack-index-0', 'index_semantic_configuration_name': 'vector-llmops-workshop-index-semantic-configuration'}, 'deployment': {'model_name': 'text-embedding-ada-002', 'model_version': '2024-08-01', 'openai_api_version': '2024-10-01-preview', 'name': 'text-embedding-ada-002', 'endpoint': 'https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15'}}, 'intent_system_prompt': 'Your task is to extract the user’s intent by reformulating their latest question into a standalone query that is understandable without prior chat history. Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained. Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question. For example, if the latest question is ‘What about its pricing?’ and the chat history discusses Microsoft Azure, reformulate it to ‘What is the pricing of Microsoft Azure?’', 'chat_system_prompt': 'You are a knowledgeable assistant specializing only in technology domain. Deliver concise and clear answers, emphasizing the main points of the user’s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n\n<context>\n{context}\n</context>', 'human_template': 'question: {input}'}}
2025-01-12 23:32:42,657 - multiagent_evaluation.utils.utils - INFO - __init__.rag_config = {'AgentConfiguration': {'agent_name': 'rag_agent', 'description': 'RAG Agent configuration', 'config_version': '8.5', 'application_version': '1.0', 'application_name': 'rag_llmops_workshop', 'deployment': {'name': 'gpt-4o-3', 'model_name': 'gpt-4o', 'model_version': '2024-08-01', 'endpoint': 'https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-3/chat/completions?api-version=2024-10-01-preview', 'openai_api_version': '2024-10-01-preview'}, 'model_parameters': {'temperature': 0.5, 'seed': 42}, 'retrieval': {'parameters': {'search_type': 'hybrid', 'top_k': 3, 'index_name': 'micirosoft-tech-stack-index-0', 'index_semantic_configuration_name': 'vector-llmops-workshop-index-semantic-configuration'}, 'deployment': {'model_name': 'text-embedding-ada-002', 'model_version': '2024-08-01', 'openai_api_version': '2024-10-01-preview', 'name': 'text-embedding-ada-002', 'endpoint': 'https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15'}}, 'intent_system_prompt': 'Your task is to extract the user’s intent by reformulating their latest question into a standalone query that is understandable without prior chat history. Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained. Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question. For example, if the latest question is ‘What about its pricing?’ and the chat history discusses Microsoft Azure, reformulate it to ‘What is the pricing of Microsoft Azure?’', 'chat_system_prompt': 'You are a knowledgeable assistant specializing only in technology domain. Deliver concise and clear answers, emphasizing the main points of the user’s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n\n<context>\n{context}\n</context>', 'human_template': 'question: {input}'}}
2025-01-12 23:32:42,675 - multiagent_evaluation.utils.utils - INFO - AISearch.Initializing Azure Search client.
2025-01-12 23:32:42,675 - multiagent_evaluation.utils.utils - INFO - ai search index name : micirosoft-tech-stack-index-0
2025-01-12 23:34:16,834 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-raw", "metadata": {"name": "rag_20250112_233208_080248", "created_on": "2025-01-12T23:32:08.067296+02:00", "status": "Completed", "display_name": "rag_20250112_233208_080248", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"agent_name": "rag_agent", "description": "RAG Agent configuration", "config_version": "8.5", "application_version": "1.0", "application_name": "rag_llmops_workshop", "deployment": {"name": "gpt-4o-3", "model_name": "gpt-4o", "model_version": "2024-08-01", "endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-3/chat/completions?api-version=2024-10-01-preview", "openai_api_version": "2024-10-01-preview"}, "model_parameters": {"temperature": 0.5, "seed": 42}, "retrieval": {"parameters": {"search_type": "hybrid", "top_k": 3, "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "deployment": {"model_name": "text-embedding-ada-002", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "name": "text-embedding-ada-002", "endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15"}}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history. Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained. Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question. For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain. Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n\n<context>\n{context}\n</context>", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag", "output_path": "/Users/vladfeigin/.promptflow/.runs/rag_20250112_233208_080248", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "init_kwargs": {"rag_config": "{\"AgentConfiguration\": {\"agent_name\": \"rag_agent\", \"description\": \"RAG Agent configuration\", \"config_version\": \"8.5\", \"application_version\": \"1.0\", \"application_name\": \"rag_llmops_workshop\", \"deployment\": {\"name\": \"gpt-4o-3\", \"model_name\": \"gpt-4o\", \"model_version\": \"2024-08-01\", \"endpoint\": \"https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-3/chat/completions?api-version=2024-10-01-preview\", \"openai_api_version\": \"2024-10-01-preview\"}, \"model_parameters\": {\"temperature\": 0.5, \"seed\": 42}, \"retrieval\": {\"parameters\": {\"search_type\": \"hybrid\", \"top_k\": 3, \"index_name\": \"micirosoft-tech-stack-index-0\", \"index_semantic_configuration_name\": \"vector-llmops-workshop-index-semantic-configuration\"}, \"deployment\": {\"model_name\": \"text-embedding-ada-002\", \"model_version\": \"2024-08-01\", \"openai_api_version\": \"2024-10-01-preview\", \"name\": \"text-embedding-ada-002\", \"endpoint\": \"https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15\"}}, \"intent_system_prompt\": \"Your task is to extract the user\\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history. Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained. Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question. For example, if the latest question is \\u2018What about its pricing?\\u2019 and the chat history discusses Microsoft Azure, reformulate it to \\u2018What is the pricing of Microsoft Azure?\\u2019\", \"chat_system_prompt\": \"You are a knowledgeable assistant specializing only in technology domain. Deliver concise and clear answers, emphasizing the main points of the user\\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\\n\\n<context>\\n{context}\\n</context>\", \"human_template\": \"question: {input}\"}}"}, "system_metrics": {"total_tokens": 5560, "prompt_tokens": 5145, "completion_tokens": 415, "duration": 44.223312}}, "flow_name": "rag", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/rag_20250112_233208_080248/flow_outputs"}, "result": [{"inputs.question": "What's Microsoft Fabric?", "inputs.answer": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses various services such as Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. Fabric integrates these components into a cohesive stack, simplifying analytics requirements by offering a seamlessly integrated, user-friendly platform. Key features: Unified data storage with OneLake, AI capabilities embedded within the platform, Centralized data management and governance,SaaS model.", "inputs.context": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises that require a unified solution. It encompasses data movement, processing, ingestion, transformation, real-time event routing, and report building. It offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions.", "outputs.output": "Microsoft Fabric is an end-to-end analytics and data platform designed for enterprises requiring a unified solution. It integrates data movement, processing, ingestion, transformation, real-time event routing, and report building into a single, user-friendly platform. Fabric offers services like Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases, operating on a Software as a Service (SaaS) model. It centralizes data storage with OneLake and embeds AI capabilities, simplifying the transition of raw data into actionable insights.", "relevance": 5.0, "groundedness": 5.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.question": "What is OneLake in Microsoft Fabric?", "inputs.answer": "OneLake in Microsoft Fabric is a unified storage system built on Azure Data Lake Storage (ADLS) Gen2. It provides a single SaaS experience and a tenant-wide store for data, serving both professional and citizen developers. OneLake simplifies data management by eliminating the need for understanding infrastructure concepts such as resource groups, RBAC, Azure Resource Manager, redundancy, or regions. It ensures easy data discovery, sharing, and uniform enforcement of policy and security settings, eliminating data silos.", "inputs.context": "Microsoft Fabric integrates separate components into a cohesive stack. Instead of relying on different databases or data warehouses, you can centralize data storage with OneLake. AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. With Fabric, you can easily transition your raw data into actionable insights for business users. OneLake provides the data storage backbone for Fabric, bringing together data from multiple sources.", "outputs.output": "OneLake in Microsoft Fabric is a unified storage system that serves as the foundation for all Fabric workloads. It is built on Azure Data Lake Storage (ADLS) Gen2 and provides a single SaaS experience for storing organizational data. OneLake eliminates data silos by offering a tenant-wide store, simplifying data discovery, sharing, and policy enforcement. It organizes data hierarchically, allowing the creation of multiple workspaces and lakehouses within a tenant, and supports easy data management and collaboration across users, regions, and clouds.", "relevance": 5.0, "groundedness": 1.0, "similarity": 4.0, "coherence": 5.0}, {"inputs.question": "What are the core services in Microsoft Fabric?", "inputs.answer": "The core services include Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, Databases and Power BI. These services are designed to work together seamlessly, providing a comprehensive set of analytics experiences tailored to specific user roles and tasks. The platform operates on a Software as a Service (SaaS) model, ensuring simplicity, integration, and centralized management.", "inputs.context": "Microsoft Fabric offers a comprehensive suite of services including Data Engineering, Data Factory, Data Science, Real-Time Analytics, Data Warehouse, and Databases. These services allow users to handle data end-to-end, from ingestion to analytics, all within a unified platform. The platform's integrated services enable users to transform raw data into actionable insights through various analytics workflows.", "outputs.output": "The core services in Microsoft Fabric include Data Factory, Data Engineering, Data Warehouse, Data Science, Real-Time Analytics, and Power BI. These services are integrated into a shared SaaS foundation, tailored for distinct user roles and specific tasks.", "relevance": 4.0, "groundedness": 1.0, "similarity": 4.0, "coherence": 5.0}, {"inputs.question": "How does Microsoft Fabric simplify analytics?", "inputs.answer": "Microsoft Fabric simplifies analytics by providing a unified, end-to-end platform that integrates various data and analytics services into a single, user-friendly environment. The key points: Unified platform, SaaS model,Centralized Data Storage, centralized Governance and Security, easy of use, embedded AI ", "inputs.context": "With Fabric, you don't need to assemble different services from multiple vendors. Instead, it offers a seamlessly integrated, user-friendly platform that simplifies your analytics requirements. Operating on a Software as a Service (SaaS) model, Fabric brings simplicity and integration to your solutions. It enables analytics and data handling within a single ecosystem, reducing the complexity associated with managing disparate services.", "outputs.output": "Microsoft Fabric simplifies analytics by offering an end-to-end platform that integrates various components into a unified solution. It eliminates the need to assemble different services from multiple vendors by providing a comprehensive suite of services like Data Engineering, Data Factory, Data Science, Real-Time Analytics, and more. Fabric centralizes data storage with OneLake and embeds AI capabilities, allowing users to easily transition raw data into actionable insights. It also provides a shared SaaS foundation with unified management, governance, and security, enabling seamless and familiar experiences across different analytics tasks.", "relevance": 5.0, "groundedness": 5.0, "similarity": 5.0, "coherence": 5.0}, {"inputs.question": "How is AI integrated in Microsoft Fabric?", "inputs.answer": "AI capabilities are embedded within Fabric, removing the need for separate AI integrations. The keys benefits: Embedded AI Capabilities, Copilot in Microsoft Fabric, Unified Data Management,Automated Machine Learning, Centralized Governance and Security ", "inputs.context": "AI capabilities are seamlessly embedded within Fabric, eliminating the need for manual integration. This integration simplifies workflows, allowing users to incorporate AI and ML processes directly within their analytics operations. Fabric\u2019s AI capabilities help users transition raw data into actionable insights for business users, supporting smarter decision-making and data-driven processes within enterprises.", "outputs.output": "AI capabilities are seamlessly embedded within Microsoft Fabric, eliminating the need for manual integration. The entire Fabric stack has AI integration, which accelerates the data journey by providing features like Copilot. This integration allows users to transform raw data into actionable insights efficiently.", "relevance": 4.0, "groundedness": 5.0, "similarity": 4.0, "coherence": 5.0}]}
2025-01-12 23:34:16,840 - multiagent_evaluation.utils.utils - INFO - {"name": "batch-evaluation-flow-metrics", "metadata": {"name": "rag_20250112_233208_080248", "created_on": "2025-01-12T23:32:08.067296+02:00", "status": "Completed", "display_name": "rag_20250112_233208_080248", "description": null, "tags": {"run_configuraton": {"AgentConfiguration": {"agent_name": "rag_agent", "description": "RAG Agent configuration", "config_version": "8.5", "application_version": "1.0", "application_name": "rag_llmops_workshop", "deployment": {"name": "gpt-4o-3", "model_name": "gpt-4o", "model_version": "2024-08-01", "endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-3/chat/completions?api-version=2024-10-01-preview", "openai_api_version": "2024-10-01-preview"}, "model_parameters": {"temperature": 0.5, "seed": 42}, "retrieval": {"parameters": {"search_type": "hybrid", "top_k": 3, "index_name": "micirosoft-tech-stack-index-0", "index_semantic_configuration_name": "vector-llmops-workshop-index-semantic-configuration"}, "deployment": {"model_name": "text-embedding-ada-002", "model_version": "2024-08-01", "openai_api_version": "2024-10-01-preview", "name": "text-embedding-ada-002", "endpoint": "https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15"}}, "intent_system_prompt": "Your task is to extract the user\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history. Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained. Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question. For example, if the latest question is \u2018What about its pricing?\u2019 and the chat history discusses Microsoft Azure, reformulate it to \u2018What is the pricing of Microsoft Azure?\u2019", "chat_system_prompt": "You are a knowledgeable assistant specializing only in technology domain. Deliver concise and clear answers, emphasizing the main points of the user\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\n\n<context>\n{context}\n</context>", "human_template": "question: {input}"}}}, "properties": {"flow_path": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag", "output_path": "/Users/vladfeigin/.promptflow/.runs/rag_20250112_233208_080248", "column_mapping": {"session_id": "${data.session_id}", "question": "${data.question}", "answer": "${data.answer}", "context": "${data.context}"}, "init_kwargs": {"rag_config": "{\"AgentConfiguration\": {\"agent_name\": \"rag_agent\", \"description\": \"RAG Agent configuration\", \"config_version\": \"8.5\", \"application_version\": \"1.0\", \"application_name\": \"rag_llmops_workshop\", \"deployment\": {\"name\": \"gpt-4o-3\", \"model_name\": \"gpt-4o\", \"model_version\": \"2024-08-01\", \"endpoint\": \"https://openai-australia-east-303474.openai.azure.com/openai/deployments/gpt-4o-3/chat/completions?api-version=2024-10-01-preview\", \"openai_api_version\": \"2024-10-01-preview\"}, \"model_parameters\": {\"temperature\": 0.5, \"seed\": 42}, \"retrieval\": {\"parameters\": {\"search_type\": \"hybrid\", \"top_k\": 3, \"index_name\": \"micirosoft-tech-stack-index-0\", \"index_semantic_configuration_name\": \"vector-llmops-workshop-index-semantic-configuration\"}, \"deployment\": {\"model_name\": \"text-embedding-ada-002\", \"model_version\": \"2024-08-01\", \"openai_api_version\": \"2024-10-01-preview\", \"name\": \"text-embedding-ada-002\", \"endpoint\": \"https://openai-australia-east-303474.openai.azure.com/openai/deployments/text-embedding-ada-002/embeddings?api-version=2023-05-15\"}}, \"intent_system_prompt\": \"Your task is to extract the user\\u2019s intent by reformulating their latest question into a standalone query that is understandable without prior chat history. Analyze the conversation to identify any contextual references in the latest question, and incorporate necessary details to make it self-contained. Ensure the reformulated question preserves the original intent. Do not provide an answer; only return the reformulated question. For example, if the latest question is \\u2018What about its pricing?\\u2019 and the chat history discusses Microsoft Azure, reformulate it to \\u2018What is the pricing of Microsoft Azure?\\u2019\", \"chat_system_prompt\": \"You are a knowledgeable assistant specializing only in technology domain. Deliver concise and clear answers, emphasizing the main points of the user\\u2019s query. Your responses should be based exclusively on the context provided in the prompt; do not incorporate external knowledge. If the provided context is insufficient to answer the question, request additional information.\\n\\n<context>\\n{context}\\n</context>\", \"human_template\": \"question: {input}\"}}"}, "system_metrics": {"total_tokens": 5560, "prompt_tokens": 5145, "completion_tokens": 415, "duration": 44.223312}}, "flow_name": "rag", "data": "/Users/vladfeigin/myprojects/llm-agent-evaluation/multiagent_evaluation/agents/rag/evaluation/data.jsonl", "output": "/Users/vladfeigin/.promptflow/.runs/rag_20250112_233208_080248/flow_outputs"}, "result": [{"metric": "relevance", "score": 4.6}, {"metric": "groundedness", "score": 3.4}, {"metric": "similarity", "score": 4.4}, {"metric": "coherence", "score": 5.0}]}
2025-01-12 23:34:16,841 - multiagent_evaluation.utils.utils - INFO - >>>Batch evaluation flow completed successfully.
